<html><head><title>Image Tools</title><meta content="width=device-width,initial-scale=1" name="viewport"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"><style>canvas{display:block;margin:0 auto;max-width:100%;border:1px solid #ededed}label input[type=file]{display:none}body>.container-fluid{padding-left:0;padding-right:0;overflow-x:hidden}.navbar-btn{margin-right:8px}.navbar-btn:last-child{margin-right:0}.form-inline input{max-width:90px}.panel-primary .panel-heading{cursor:pointer}.well{margin-bottom:0}</style></head><body><nav class="navbar navbar-default"><div class="container-fluid"><div class="navbar-header"><span class="navbar-brand">Image tools</span></div><div class="navbar-collapse"><div class="navbar-right"><label for="file" class="btn btn-default navbar-btn">Choose a file <input type="file" accept="image/*" id="file"></label><button class="btn btn-primary navbar-btn">Export</button></div></div></div></nav><div class="container-fluid"><div class="row"><div class="col-sm-4 col-md-3"><div class="well"><div class="panel panel-primary"><div class="panel-heading" data-toggle="collapse" data-target="#collapseDimension" aria-expanded="true" aria-controls="collapseDimension"><h4 class="panel-title">Size & position</h4></div><div class="panel-body collapse in" id="collapseDimension"><div class="form-group"><div class="btn-group btn-group-sm"><button type="button" class="btn btn-default" id="imgPosTop">Top</button> <button type="button" class="btn btn-default" id="imgPosRight">Right</button> <button type="button" class="btn btn-default" id="imgPosBottom">Bottom</button> <button type="button" class="btn btn-default" id="imgPosLeft">Left</button></div><div class="btn-group btn-group-sm"><button type="button" class="btn btn-default" id="imgPosCenter">Horizontal center</button> <button type="button" class="btn btn-default" id="imgPosVCenter">Vertical center</button></div></div><div class="form-group"><label>Working plan size:</label><div class="form-inline"><input class="form-control" type="number" id="canvasW" placeholder="width"> x <input class="form-control" type="number" id="canvasH" placeholder="height"> pixels</div></div><div class="form-group"><label>Image size:</label><div class="form-inline"><input class="form-control" type="number" id="imgW" placeholder="width"> x <input class="form-control" type="number" id="imgH" placeholder="height"> pixels</div><div class="checkbox"><label for="aspectRatio"><input type="checkbox" id="aspectRatio"> &nbsp; keep aspect ratio</label></div></div><div class="form-group"><label>Image positions:</label><div class="form-inline"><input class="form-control" type="number" id="imgPosX" placeholder="X"> <input class="form-control" type="number" id="imgPosY" placeholder="Y"> pixels</div></div><div class="form-group"><label>Image rotation:</label><input class="form-control" type="number" id="imgRotate" placeholder="Rotate"></div></div></div><div class="panel panel-primary"><div class="panel-heading" data-toggle="collapse" data-target="#collapseFilters" ria-expanded="false" aria-controls="collapseFilters"><h4 class="panel-title">Filters</h4></div><div class="panel-body collapse" id="collapseFilters"><div class="checkbox"><label for="invert"><input type="checkbox" class="filter invert" id="invert" value="invert"> &nbsp; Invert</label></div><div class="checkbox"><label for="grayscale"><input type="checkbox" class="filter grayscale" id="grayscale" value="grayscale"> &nbsp; Grayscale</label></div><div class="checkbox"><label for="sepia"><input type="checkbox" class="filter sepia" id="sepia" value="sepia"> &nbsp; Sepia</label></div><div class="checkbox"><label for="blur"><input type="checkbox" class="filter blur" id="blur" value="blur"> &nbsp; Blur</label></div><div class="checkbox"><label for="noise"><input type="checkbox" class="filter noise" id="noise" value="noise"> &nbsp; Noise</label></div><div class="checkbox"><label for="brightness"><input type="checkbox" class="filter brightness" id="brightness" value="brightness"> &nbsp; Brightness</label></div><div class="checkbox"><label for="blackandwhite"><input type="checkbox" class="filter blackandwhite" id="blackandwhite" value="blackAndWhite"> &nbsp; Black and white</label></div><div class="panel panel-default"><div class="panel-heading"><div class="panel-title"><small>Noise adjustement</small></div></div><div class="panel-body"><div class="form-group noise-options"><input type="range" min="1" max="100" id="factor"></div></div></div><div class="panel panel-default"><div class="panel-heading"><div class="panel-title"><small>Brightness adjustement</small></div></div><div class="panel-body"><div class="form-group brightness-options"><input type="range" min="1" max="100" id="adjustement"></div></div></div><div class="panel panel-default"><div class="panel-heading"><div class="panel-title"><small>Black and white adjustement</small></div></div><div class="panel-body"><div class="form-group blackandwhite-options"><input type="range" min="1" max="255" id="threshold"></div></div></div></div></div></div></div><div class="col-sm-8 col-md-9"><div class="panel panel-default"><div class="panel-heading">Preview</div><div class="panel-body"><canvas id="preview"></canvas></div></div></div></div></div><script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script><script type="text/javascript">!function(t){function n(t,n,a){for(var e=t.data,i=e.length,u=[].concat(n[0],n[1],n[2]),r=0,o=t.width,c=0;c<i;c++)if((c+1)%4!=0){r=0;for(var l=[e[c-4*o-4]||e[c],e[c-4*o]||e[c],e[c-4*o+4]||e[c],e[c-4]||e[c],e[c],e[c+4]||e[c],e[c+4*o-4]||e[c],e[c+4*o]||e[c],e[c+4*o+4]||e[c]],v=0;v<9;v++)r+=l[v]*u[v];r/=9,a&&(r+=a),r=Math.min(Math.max(r,0),255),e[c]=r}return t}function a(t){return document.querySelector(t)}function e(t){return function(t){return Array.prototype.slice.call(t)}(document.querySelectorAll(t))}function i(t,n){e(t).forEach(function(t){t.addEventListener("click",n)})}function u(){var t=e('.filter[type="checkbox"]:checked');!function(t){!function(t,n){if(t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){n(t.target.result)},a.readAsDataURL(t.files[0])}}(a("input"),function(n){var e=new Image;e.onload=function(){var n=a("input#imgW"),i=a("input#imgH"),u=a("input#canvasW"),r=a("input#canvasH"),o=a("input#imgPosX"),c=a("input#imgPosY"),l=a("input#aspectRatio"),v=a("input#imgRotate"),s=e.height/e.width,f=parseInt(n.value,10)||e.width,g=parseInt(i.value,10)||e.height,h=parseInt(u.value,10)||e.width,d=parseInt(r.value,10)||e.height,p=parseInt(o.value,10)||0,m=parseInt(c.value,10)||0,I=parseInt(v.value,10)||0,P=function(t,n){var e=a("canvas");return e.width=t,e.height=n,e}(h,d),b=P.getContext("2d");l.checked&&(g=f*s),n.value=f,i.value=g,u.value=h,r.value=d,o.value=p,c.value=m,0!==I?(b.translate(P.width/2,P.height/2),b.rotate(I*Math.PI/180),b.drawImage(e,p-f/2,m-g/2,f,g)):b.drawImage(e,p,m,f,g),t&&t()},e.src=n})}(function(){t.forEach(function(t){!function(t){var n=a("canvas").getContext("2d"),e=null;if("brightness"==t){var i=a("#adjustement");e=parseInt(i.value,10)}else if("blackAndWhite"==t){var u=a("#threshold");e=parseInt(u.value,10)}else if("noise"==t){var r=a("#factor");e=parseInt(r.value,10)}var o=function(t,n){for(var e=[function(){var t=a("canvas");return t.getContext("2d").getImageData(0,0,t.width,t.height)}()],i=1;i<arguments.length;i++)e.push(arguments[i]);return t.apply(null,e)}(Filters[t],e);n.putImageData(o,0,0)}(t.value)})})}["input","#adjustement","#factor","#threshold","input#canvasW","input#canvasH","input#imgW","input#imgH","input#aspectRatio","input#imgPosX","input#imgPosY","input#ImgRotate",'.filter[type="checkbox"]'].forEach(function(t){!function(t,n){e(t).forEach(function(t){t.addEventListener("change",n)})}(t,u)}),i("a",function(){var t=a("canvas");$link.href=t.toDataURL("image/png"),$link.download="output.png"}),i("button#imgPosTop",function(){a("#imgPosY").value=0,u()}),i("button#imgPosRight",function(){var t=a("#canvasW").value,n=a("#imgW").value;a("#imgPosX").value=t-n,u()}),i("button#imgPosBottom",function(){var t=a("#canvasH").value,n=a("#imgH").value;a("#imgPosY").value=t-n,u()}),i("button#imgPosLeft",function(){a("#imgPosX").value=0,u()}),i("button#imgPosCenter",function(){var t=a("#canvasW").value,n=a("#imgW").value;a("#imgPosX").value=(t-n)/2,u()}),i("button#imgPosVCenter",function(){var t=a("#canvasH").value,n=a("#imgH").value;a("#imgPosY").value=(t-n)/2,u()}),t.Filters={grayscale:function(t){for(var n=t.data,a=0;a<n.length;a+=4){var e=.2126*n[a]+.7152*n[a+1]+.0722*n[a+2];n[a]=n[a+1]=n[a+2]=e}return t},sepia:function(t){for(var n=t.data,a=0;a<n.length;a+=4){var e=.3*n[a]+.59*n[a+1]+.11*n[a+2];n[a]=e+100,n[a+1]=e+50,n[a+2]=e}return t},invert:function(t){for(var n=t.data,a=0;a<n.length;a+=4)n[a]=255-n[a],n[a+1]=255-n[a+1],n[a+2]=255-n[a+2];return t},brightness:function(t,n){for(var a=t.data,e=0;e<a.length;e+=4)a[e]+=n||40,a[e+1]+=n||40,a[e+2]+=n||40;return t},noise:function(t,n){for(var a=t.data,e=0;e<a.length;e+=4){var i=(.5-Math.random())*n;a[e]=a[e]+i,a[e+1]=a[e+1]+i,a[e+2]=a[e+2]+i}return t},blackAndWhite:function(t,n){for(var a=t.data,e=0;e<a.length;e+=4){var i=.2126*a[e]+.7152*a[e+1]+.0722*a[e+2]>=(n||128)?255:0;a[e]=a[e+1]=a[e+2]=i}return t},blur:function(t){return n(t,[[1,1,1],[1,1,1],[1,1,1]])},sharpen:function(t){return n(t,[[0,-2,0],[-2,11,-2],[0,-2,0]])},emboss:function(t){return n(t,[[2,0,0],[0,-1,0],[0,0,-1]],127)},lighten:function(t){return n(t,[[0,0,0],[0,12,0],[0,0,0]])},darken:function(t){return n(t,[[0,0,0],[0,6,0],[0,0,0]])},edge:function(t){return n(t,[[1,1,1],[1,-7,1],[1,1,1]])},identity:function(t){return n(t,[[0,0,0],[0,9,0],[0,0,0]])}}}(window)</script></body></html>